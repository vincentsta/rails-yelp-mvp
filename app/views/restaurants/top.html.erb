<div class="row">
  <div class="col-xs-6 col-md-4 col-md-offset-2">
    <h2>Top restaurants</h2>
  </div>
  <div class="col-xs-12 col-md-8 col-md-offset-2">
    <form class="form-inline" id="filter-form">
      <div class="form-group" >
        <label for="cat">Category</label>
        <input type="text" class="form-control" id="category" placeholder="Jane Doe">
      </div>
      <button type="submit" class="btn btn-default">Filter</button>
    </form>
  </div>
  <div class="col-xs-12 col-md-8 col-md-offset-2" id="restaurant-list">
    <% @restaurants.each do |el| %>
      <% @restaurant = el %>
      <%= render 'listel' %>
    <% end %>
  </div>
</div>

<script>
  const form = document.getElementById("filter-form");
  const list = document.getElementById("restaurant-list");
  const products = list.querySelectorAll(".product");
  form.addEventListener("submit", (event) => {
    event.preventDefault();
    products.forEach( (el) => {
      el.classList.remove("hide-product");
    });
    const categ = document.getElementById("category").value;
    products.forEach( (el) => {
      console.log(el.dataset.cat);
      if (el.dataset.cat != categ) el.classList.add("hide-product");
    });
  });
</script>
